#!/bin/bash
export LANG=C
export LC_CTYPE=C
export LC_ALL=C
export -n LD_LIBRARY_PATH
CMD="/usr/bin/emacs"

# Declare an empty array
declare -a my_argv=()

for ((i=1; i<=$#; i++))
do
    if [[ "${!i}" =~ (.+):([0-9]+)$ ]]; then
        #echo "Matched +${BASH_REMATCH[2]} ${BASH_REMATCH[1]}"
        my_argv=("+${BASH_REMATCH[2]}" "${my_argv[@]}")
        my_argv+=("${BASH_REMATCH[1]}")
    else
        #echo "No match in '${!i}'"
        my_argv+=("${!i}")
    fi
done

#echo $CMD "${my_argv[@]}"

exec $CMD "${my_argv[@]}"
SCRIPT="$(readlink -f "$0")"
echo $SCRIPT could not execute $CMD "${my_argv[@]}"
exit 1

